#include <iostream>
#include "conio.h"

using namespace std;

void drawMap (char map[][20], int heroY, int heroX, int mapSize) {
    int startCoordsY = ((heroY - 5) < 0) ? 0 : ((heroY + 5) > mapSize) ? mapSize - 11 : heroY - 5;
    int startCoordsX = ((heroX - 5) < 0) ? 0 : ((heroX + 5) > mapSize) ? mapSize - 11 : heroX - 5;

    for (int i = 0; i < 11; i++) {
        for (int j = 0; j < 11; j++) {
            cout << map[startCoordsY + i][startCoordsX + j] << " ";
        }
        
        cout << '\n';
    }
}

void moveHero(char map[][20], int *heroX, int *heroY) {
    enum dirctions {up = 65, down, right, left};

    getch();
    getch();
    int userDirection = getch();

    map[*heroY][*heroX] = '.';
    switch (userDirection) {
        case up:
            map[--(*heroY)][*heroX] = '@'; break;
        case down:
            map[++(*heroY)][*heroX] = '@'; break;
        case left:
            map[*heroY][--(*heroX)] = '@'; break;
        case right:
            map[*heroY][++(*heroX)] = '@'; break;
        default:
            cout << "you pressed another key than arrows";
            map[*heroY][*heroY] = '@';
    }
}
int main (void) {

    int heroX = 0;
    int heroY = 0;

    char map[20][20] = {
        {'#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#'},
        {'.', '@', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'},
        {'.', '.', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#'},
    };

    while (1 == 1) {
        system("clear");
        drawMap(map, 1, heroX, heroY);
        moveHero(map, &heroX, &heroY);
    }

    return 0;
}
